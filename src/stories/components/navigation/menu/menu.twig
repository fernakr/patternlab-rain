

<div id="main-menu" class="absolute z-10 bg-white w-full left-0 py-4 lg:mt-4 lg:relative lg:block lg:px-0 lg:py-0" :class="mainMenu ? '' : 'hidden'">
  <div class="container">
    <ul role="menubar" class="flex flex-col lg:flex-row justify-between gap-x-3 list-none" >
      {% for link in menu %}
        <li 
          role="presentation" 
          class="lg:border-0 lg:py-0 {{ loop.last == false ? 'border-b border-gray-200 pb-4' : '' }} {{ loop.first == false ? 'pt-4' : ''}}"
          {% if link.children | length %}
            @click="if(window.innerWidth <= 1024) dropdownOpen.sm = dropdownOpen.sm === {{ loop.index0 }} ? null : {{ loop.index0 }}" 
            @mouseleave="if(window.innerWidth > 1024) dropdownOpen.lg = null;"
            @mouseenter="if(window.innerWidth > 1024) dropdownOpen.lg = {{ loop.index0 }}" 
          {% endif %}
          >
            <a class="text-black no-underline font-bold" {% if link.new_window | default %}target="_blank" rel="noopener"{% endif %} role="menuitem" href="{{ link.url }}">
              {{ link.parent_text | default is not empty ? link.parent_text : link.text }}
            </a>
          {% if link.children | default %}
          <ul 
            role="presentation" 
            class="list-none lg:absolute lg:bg-white lg:p-3 w-80" 
            :class="(dropdownOpen.sm === {{ loop.index0 }} || dropdownOpen.lg === {{ loop.index0 }} ? '' : 'hidden')"             
            x-data="{{'{'}} childOpen:  { sm: null, lg: null } {{'}'}}">
            <li  role="presentation" class="parent-link">
              <a {% if link.new_window | default %}target="_blank" rel="noopener"{% endif %} href="{{ link.url }}" class="text-primary">{{ link.text }} Overview</a>
            </li>
            {% for child in link.children %}
              <li  
                class="py-1"
                {% if child.children | default %}                
                  :class="childOpen.lg === {{ loop.index0 }} ? 'bg-gray-100' : ''"
                  @click="if(window.innerWidth <= 1024) childOpen.sm = {{ loop.index0 }}" 
                  @mouseenter="if(window.innerWidth > 1024) childOpen.lg = {{ loop.index0 }}" 
                  @mouseleave="if(window.innerWidth > 1024) childOpen.lg = null;" 
                {% endif %}
                role="presentation">
                <a role="menuitem" href="{{ child.url }}">{{ child.text }}</a>
                {% if child.children | default %}
                <ul role="presentation" class="list-none lg:absolute lg:left-full top-0 bg-gray-100 w-80 p-3" :class="childOpen.lg === {{ loop.index0 }} ? '' : 'hidden'">
                  <li role="presentation" ><a {% if child.new_window | default %}target="_blank" rel="noopener"{% endif %} href="{{ child.url }}">{{ child.text }} Overview</a></li>
                  {% for grandchild in child.children %}
                    <li role="presentation">
                      <a role="menuitem" href="{{ grandchild.url }}">{{ grandchild.text }}</a>
                    </li>
                  {% endfor %}
                </ul>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
          {% endif %}
        </li>
      {% endfor %}    
    </ul>
    <div class="lg:hidden search-wrapper mt-4">
      {% include  '@components/forms/simple-form/simple-form.twig' with {
        input_id: 'keywords_mobile'
      }%}
    </div>

  </div>
  
</div>
